export const metadata = {
  title: 'Configuration',
  description: 'Configure renoun in your project.',
}

This guide will help you configure renoun and better understand all of the configuration options. We'll cover:

- Setting up the `RootProvider`
- Selecting themes (bundled or custom)
- Configuring color modes (light/dark) with optional overrides
- Loading languages for syntax highlighting
- Configuring git links and the canonical site URL
- Enabling debug logs

## RootProvider

Configure renoun at the root of your application using the `RootProvider` component. This component must wrap the `html` element and will provide renoun's configuration to the entire application.

```tsx
import { RootProvider } from 'renoun'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <RootProvider
      git="souporserious/renoun"
      siteUrl="https://renoun.dev"
      theme="theme.json"
    >
      <html>
        <body>{children}</body>
      </html>
    </RootProvider>
  )
}
```

<Note>

The `RootProvider` component clones the `html` element and adds the [`suppressHydrationWarning`](https://react.dev/reference/react-dom/client/hydrateRoot#suppressing-unavoidable-hydration-mismatch-errors) property. This property is required to suppress the hydration warning that is thrown when the [theme script](#disabling-the-theme-script) sets the `data-theme` attribute on the `html` element. The `suppressHydrationWarning` property only applies one level deep, so it will not block hydration warnings on other elements.

</Note>

## Themes

renoun provides accurate syntax highlighting using TextMate grammars and VS Code–compatible color themes. To keep install size small, renoun does not bundle any themes by default. You can either reference a local theme JSON file or install the optional `tm-themes` package to load a bundled theme by name.

For more information on TextMate grammars and themes, see the <a href="https://code.visualstudio.com/api/language-extensions/syntax-highlight-guide" target="_blank" rel="noopener">VS Code syntax highlighting guide</a> and the <a href="https://macromates.com/manual/en/language_grammars" target="_blank" rel="noopener">TextMate grammar reference</a>.

### Predefined Themes

To use a predefined theme, first install the `tm-themes` package:

<Command variant="install-dev">tm-themes</Command>

Now you can define a supported theme by name through `RootProvider`:

```tsx
import { RootProvider } from 'renoun'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <RootProvider theme="nord">
      <html>
        <body>{children}</body>
      </html>
    </RootProvider>
  )
}
```

### Custom Themes

To use a custom theme, reference a JSON file that defines a <a href="https://code.visualstudio.com/api/extension-guides/color-theme" target="_blank" rel="noopener">VS Code compatible theme</a>:

```tsx
import { RootProvider } from 'renoun'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <RootProvider theme="theme.json">
      <html>
        <body>{children}</body>
      </html>
    </RootProvider>
  )
}
```

### Multiple Themes

You can also specify multiple themes, the first theme defined in the object will be the default:

```tsx
import { RootProvider } from 'renoun'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <RootProvider
      theme={{
        light: 'vitesse-light',
        dark: 'vitesse-dark',
      }}
    >
      <html>
        <body>{children}</body>
      </html>
    </RootProvider>
  )
}
```

To use a specific default theme, append a `data-theme` attribute to the `html` element:

```html
<html data-theme="dark">
  ...
</html>
```

The `useThemePicker` hook can be used to build a select menu or toggle for choosing from the configured themes:

```tsx
'use client'
import { useThemePicker } from 'renoun'

export function ThemePicker() {
  const [theme, setTheme] = useThemePicker()

  return (
    <select value={theme} onChange={(event) => setTheme(event.target.value)}>
      <option value="light">Light</option>
      <option value="dark">Dark</option>
    </select>
  )
}
```

### Integrating with Other Theme Providers

By default, a small script that manages the theme is included in the head of the document. This script sets the `data-theme` attribute on the `html` element based on local storage. If you are using another theming provider that already manages the theme, you can disable renoun's theme script by setting the `includeThemeScript` prop to `false` to avoid conflicts:

```tsx
import { RootProvider } from 'renoun'
import { ThemeProvider } from 'next-themes'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <RootProvider includeThemeScript={false}>
      <html>
        <body>
          <ThemeProvider>{children}</ThemeProvider>
        </body>
      </html>
    </RootProvider>
  )
}
```

### Overriding Themes

To override a theme, you can provide a tuple that specifies the theme values to override:

```tsx
import { RootProvider } from 'renoun'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <RootProvider
      theme={{
        light: 'vitesse-light',
        dark: [
          'vitesse-dark',
          {
            colors: {
              'editor.background': '#000000',
              'panel.border': '#666666',
            },
          },
        ],
      }}
    >
      {children}
    </RootProvider>
  )
}
```

This accepts a subset of a VS Code theme to override, specifically the `colors`, `tokenColors`, and `semanticTokenColors` properties.

## Languages

Use the `languages` prop to define which grammars are available to `CodeBlock` and `CodeInline`.

### Default Languages

The following languages are loaded by default:

```tsx
import { RootProvider } from 'renoun'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <RootProvider
      languages={[
        'css',
        'js',
        'jsx',
        'ts',
        'tsx',
        'md',
        'mdx',
        'shell',
        'json',
        'html',
      ]}
    >
      <html>
        <body>{children}</body>
      </html>
    </RootProvider>
  )
}
```

<Note>

Only this core subset of grammars is bundled with renoun. To add support for additional languages, install the optional `tm-grammars` package and list the languages you want in the `languages` array.

File types such as `js` and `ts` are automatically mapped to the `tsx` grammar, and `md` maps to `mdx`, so they do not need to be included explicitly unless you need features that are only available in the respective grammar.

</Note>

### Additional Languages

To add support for additional languages, install the optional `tm-grammars` package and list the languages you want in the `languages` array.

<Command variant="install-dev">tm-grammars</Command>

Now you can reference languages by name via `RootProvider`:

```tsx
import { RootProvider } from 'renoun'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <RootProvider languages={['python', 'rust', 'go']}>
      <html>
        <body>{children}</body>
      </html>
    </RootProvider>
  )
}
```

## Git Information

Set `git` on `RootProvider` to enable edit/source links and canonical URLs:

```tsx
import { RootProvider } from 'renoun'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <RootProvider
      git={{
        source: 'https://github.com/souporserious/renoun',
        branch: 'main',
        host: 'github',
        owner: 'souporserious',
        repository: 'renoun',
        baseUrl: 'https://github.com',
      }}
    >
      <html>
        <body>{children}</body>
      </html>
    </RootProvider>
  )
}
```

### Shorthand Syntax

You can also use a shorthand syntax to specify the git information:

```tsx
import { RootProvider } from 'renoun'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <RootProvider git="souporserious/renoun">
      <html>
        <body>{children}</body>
      </html>
    </RootProvider>
  )
}
```

This will be parsed into the following object:

```json
{
  "source": "https://github.com/souporserious/renoun",
  "branch": "main",
  "host": "github",
  "owner": "souporserious",
  "repository": "renoun",
  "baseUrl": "https://github.com"
}
```

A specifier can also include a branch, host, owner, repository, and base URL:

```tsx
import { RootProvider } from 'renoun'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <RootProvider git="pierre:souporserious/renoun@docs">
      <html>
        <body>{children}</body>
      </html>
    </RootProvider>
  )
}
```

## Site URL

Provide a `siteUrl` so sitemaps and other absolute URLs are generated correctly:

```tsx
import { RootProvider } from 'renoun'

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <RootProvider siteUrl="https://renoun.dev">
      <html>
        <body>{children}</body>
      </html>
    </RootProvider>
  )
}
```

## Debug Logs

You can enable internal debug logging by setting the `RENOUN_DEBUG` environment variable. This is helpful when investigating issues related to the renoun CLI, the WebSocker server, and other internal utilities.

- Allowed values:
  - `true` or `1`: enable the most verbose logging
  - `error`, `warn`, `info`, `debug`, `trace`: set a specific minimum level
  - `false` or `0`: logging disabled (default)

Examples:

```bash
# Most verbose logging
RENOUN_DEBUG=true renoun next dev

# Only info and above
RENOUN_DEBUG=info renoun next dev
```
